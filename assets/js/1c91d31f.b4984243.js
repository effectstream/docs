"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[6499],{2970:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"home/chains/cardano","title":"Cardano","description":"Effectstream connects to Cardano to leverage its UTXO model and native assets. Syncing is typically handled via high-performance indexers.","source":"@site/docs/home/200-chains/203-cardano.md","sourceDirName":"home/200-chains","slug":"/home/chains/cardano","permalink":"/docs/home/chains/cardano","draft":false,"unlisted":false,"editUrl":"https://github.com/PaimaStudios/paima-engine-docs/tree/main/docs/home/200-chains/203-cardano.md","tags":[],"version":"current","sidebarPosition":203,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Midnight","permalink":"/docs/home/chains/midnight"},"next":{"title":"Avail","permalink":"/docs/home/chains/avail"}}');var r=t(2531),s=t(6613);const i={},o="Cardano",l={},c=[{value:"1. Configuration (Read)",id:"1-configuration-read",level:2},{value:"Network Definition",id:"network-definition",level:3},{value:"Sync Protocol",id:"sync-protocol",level:3},{value:"Primitives",id:"primitives",level:3},{value:"2. Batcher Adapters (Write)",id:"2-batcher-adapters-write",level:2},{value:"3. Browser Wallets (Connect)",id:"3-browser-wallets-connect",level:2},{value:"4. Cryptography (Verify)",id:"4-cryptography-verify",level:2},{value:"Signing Messages",id:"signing-messages",level:3},{value:"Verifying Signatures",id:"verifying-signatures",level:3},{value:"5. Orchestration",id:"5-orchestration",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"cardano",children:"Cardano"})}),"\n",(0,r.jsx)(n.p,{children:"Effectstream connects to Cardano to leverage its UTXO model and native assets. Syncing is typically handled via high-performance indexers."}),"\n",(0,r.jsx)(n.h2,{id:"1-configuration-read",children:"1. Configuration (Read)"}),"\n",(0,r.jsx)(n.h3,{id:"network-definition",children:"Network Definition"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'.buildNetworks(builder =>\n  builder.addNetwork({\n    name: "cardano",\n    type: ConfigNetworkType.CARDANO,\n    network: "yaci", // or "preview", "mainnet"\n    nodeUrl: "http://127.0.0.1:10000", // e.g. Yaci Devkit\n  })\n)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"sync-protocol",children:"Sync Protocol"}),"\n",(0,r.jsxs)(n.p,{children:["Effectstream supports syncing via ",(0,r.jsx)(n.strong,{children:"UTXO-RPC"})," (using Dolos/Yaci) or ",(0,r.jsx)(n.strong,{children:"Carp"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'// Example using UTXO-RPC (Dolos)\n.addParallel(\n  (networks) => networks.cardano,\n  (network, deployments) => ({\n    name: "parallelUtxoRpc",\n    type: ConfigSyncProtocolType.CARDANO_UTXORPC_PARALLEL,\n    rpcUrl: "http://127.0.0.1:50051", // UTXO-RPC endpoint\n    startSlot: 1,\n  })\n)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"primitives",children:"Primitives"}),"\n",(0,r.jsxs)(n.p,{children:["Effectstream provides primitives to track specific UTXO patterns, policy IDs (Native Assets), or metadata labels.\n",(0,r.jsxs)(n.em,{children:["(Note: Check ",(0,r.jsx)(n.code,{children:"@effectstream/sm/builtin"})," for the latest list of available Cardano primitives)"]}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"2-batcher-adapters-write",children:"2. Batcher Adapters (Write)"}),"\n",(0,r.jsxs)(n.p,{children:["To write to Cardano, you must implement a ",(0,r.jsx)(n.code,{children:"BlockchainAdapter"})," that constructs Cardano transactions."]}),"\n",(0,r.jsx)(n.p,{children:"Since Cardano uses a UTXO model, the adapter typically needs to:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Query available UTXOs for the batcher wallet."}),"\n",(0,r.jsxs)(n.li,{children:["Construct a transaction using a library like ",(0,r.jsx)(n.code,{children:"lucid"})," or ",(0,r.jsx)(n.code,{children:"mesh"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Sign and submit via the node or an API like Ogmios."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Conceptual Custom Adapter\nclass CardanoAdapter implements BlockchainAdapter {\n  async submitBatch(data: any) {\n    // 1. Build TX with data embedded in Metadata or Datum\n    // 2. Sign with stored private key\n    // 3. Submit\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"3-browser-wallets-connect",children:"3. Browser Wallets (Connect)"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"WalletMode.Cardano"})," to connect to Cardano wallets (Nami, Eternl, Flint, etc.)."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'import { walletLogin, WalletMode } from "@effectstream/wallets";\n\nconst result = await walletLogin({\n  mode: WalletMode.Cardano,\n  // Optional: prefer a specific wallet extension\n  preference: { name: "nami" }, \n});\n\nif (result.success) {\n  const wallet = result.result;\n  console.log("Connected Cardano Address:", wallet.walletAddress);\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"4-cryptography-verify",children:"4. Cryptography (Verify)"}),"\n",(0,r.jsxs)(n.p,{children:["Effectstream includes the logic to verify ",(0,r.jsx)(n.strong,{children:"CIP-30/CIP-8 Data Signatures"}),". This allows you to authenticate user actions signed by Cardano wallets."]}),"\n",(0,r.jsx)(n.h3,{id:"signing-messages",children:"Signing Messages"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'import { signMessage } from "@effectstream/wallets";\n\n// Note: Cardano wallets often sign hex payloads or structured data\nconst signature = await signMessage(wallet, "Hello Cardano");\n'})}),"\n",(0,r.jsx)(n.h3,{id:"verifying-signatures",children:"Verifying Signatures"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'import { CryptoManager } from "@effectstream/crypto";\nimport { AddressType } from "@effectstream/utils";\n\nconst crypto = CryptoManager.getCryptoManager(AddressType.CARDANO);\n\n// 1. Verify Cardano Address (Bech32)\nconst isValidAddr = crypto.verifyAddress("addr_test1...");\n\n// 2. Verify Data Signature (CIP-30)\n// Note: \'signatureStruct\' usually contains the signature + key (e.g., "sig+key")\nconst isValidSig = await crypto.verifySignature(\n  userAddress, \n  "Hello Cardano", \n  signatureStruct\n);\n'})}),"\n",(0,r.jsx)(n.h2,{id:"5-orchestration",children:"5. Orchestration"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"launchCardano"})," from ",(0,r.jsx)(n.code,{children:"@effectstream/orchestrator/start-cardano"})," to launch a local environment using ",(0,r.jsx)(n.strong,{children:"Yaci Devkit"})," and ",(0,r.jsx)(n.strong,{children:"Dolos"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'// in start.ts\nprocessesToLaunch: [\n  ...launchCardano("@my-project/cardano-contracts"),\n]\n'})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["NOTE: To use this launcher you need to implement some ",(0,r.jsx)(n.code,{children:"deno task"})," in your project. A working implementation is provided in the ",(0,r.jsx)(n.code,{children:"template generator"}),", ",(0,r.jsx)(n.code,{children:"templates"})," or ",(0,r.jsx)(n.code,{children:"e2e tests"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "@e2e/cardano-contracts",\n  ...\n  "tasks": {\n    "devkit:start": "deno run -A --node-modules-dir npm:@bloxbean/yaci-devkit up",\n    "devkit:wait": "wait-on tcp:3001",\n    "dolos:fill-template": "deno run -A ./fill-template.ts",\n    "dolos:start": "rm -rf ./data && rm -rf ./dolos.socket && deno task dolos:fill-template && deno run -A --node-modules-dir npm:@txpipe/dolos bootstrap relay && deno run -A --node-modules-dir npm:@txpipe/dolos daemon",\n    "dolos:wait": "wait-on tcp:50051" // utxorpc port\n  }\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},6613:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var a=t(1491);const r={},s=a.createContext(r);function i(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);