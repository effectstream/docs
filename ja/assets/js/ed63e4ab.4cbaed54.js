"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[2527],{6613:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>s});var i=t(1491);const r={},a=i.createContext(r);function c(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(a.Provider,{value:n},e.children)}},9376:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"home/components/batcher/overview","title":"Overview","description":"The Batcher is a production-ready service for aggregating and batching user transactions across multiple blockchains. It provides a unified HTTP API for submitting inputs while abstracting away blockchain-specific complexity through a pluggable adapter system.","source":"@site/docs/home/100-components/108-batcher/1200-overview.md","sourceDirName":"home/100-components/108-batcher","slug":"/home/components/batcher/overview","permalink":"/docs/ja/home/components/batcher/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/PaimaStudios/paima-engine-docs/tree/main/docs/home/100-components/108-batcher/1200-overview.md","tags":[],"version":"current","sidebarPosition":1200,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Paima Explorer","permalink":"/docs/ja/home/components/explorer"},"next":{"title":"Introduction","permalink":"/docs/ja/home/components/batcher/introduction"}}');var r=t(2531),a=t(6613);const c={},s="Overview",o={},l=[{value:"Quick Start",id:"quick-start",level:2},{value:"Key Features",id:"key-features",level:2},{value:"\ud83d\udd17 Multi-Chain Support",id:"-multi-chain-support",level:3},{value:"\ud83d\udd04 Flexible Batching Strategies",id:"-flexible-batching-strategies",level:3},{value:"\ud83d\udcbe Crash-Safe Storage",id:"-crash-safe-storage",level:3},{value:"\ud83d\udd0c Pluggable Architecture",id:"-pluggable-architecture",level:3},{value:"\ud83d\udcca Production-Ready",id:"-production-ready",level:3},{value:"Architecture Overview",id:"architecture-overview",level:2},{value:"Documentation Structure",id:"documentation-structure",level:2},{value:"Getting Started",id:"getting-started",level:3},{value:"Configuration &amp; Setup",id:"configuration--setup",level:3},{value:"Customization",id:"customization",level:3},{value:"Common Use Cases",id:"common-use-cases",level:2},{value:"Multi-Chain Gaming",id:"multi-chain-gaming",level:3},{value:"Financial Applications",id:"financial-applications",level:3},{value:"NFT Minting",id:"nft-minting",level:3},{value:"Example: Complete Setup",id:"example-complete-setup",level:2},{value:"API Endpoints",id:"api-endpoints",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"overview",children:"Overview"})}),"\n",(0,r.jsx)(n.p,{children:"The Batcher is a production-ready service for aggregating and batching user transactions across multiple blockchains. It provides a unified HTTP API for submitting inputs while abstracting away blockchain-specific complexity through a pluggable adapter system."}),"\n",(0,r.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,r.jsx)(n.p,{children:"Get started quickly with these essential guides:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/introduction",children:"Introduction"})})," - Overview and architecture"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/core-concepts",children:"Core Concepts"})})," - Understanding the building blocks"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/configuration",children:"Configuration"})})," - Setting up your batcher"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/batching-pipeline",children:"The Batching Pipeline"})})," - How inputs flow through the system"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,r.jsx)(n.h3,{id:"-multi-chain-support",children:"\ud83d\udd17 Multi-Chain Support"}),"\n",(0,r.jsx)(n.p,{children:"Batch transactions for multiple blockchains simultaneously. Each blockchain gets its own adapter with independent batching rules and configuration."}),"\n",(0,r.jsx)(n.h3,{id:"-flexible-batching-strategies",children:"\ud83d\udd04 Flexible Batching Strategies"}),"\n",(0,r.jsx)(n.p,{children:"Configure when batches are submitted using time-based, size-based, value-based, hybrid, or custom criteria\u2014independently per blockchain."}),"\n",(0,r.jsx)(n.h3,{id:"-crash-safe-storage",children:"\ud83d\udcbe Crash-Safe Storage"}),"\n",(0,r.jsx)(n.p,{children:"All inputs are persisted immediately to storage (file, PostgreSQL, Redis, or custom). No in-memory queues that can be lost on restart."}),"\n",(0,r.jsx)(n.h3,{id:"-pluggable-architecture",children:"\ud83d\udd0c Pluggable Architecture"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Adapters"}),": Add support for new blockchains by implementing the ",(0,r.jsx)(n.code,{children:"BlockchainAdapter"})," interface"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Storage"}),": Use any backend by implementing the ",(0,r.jsx)(n.code,{children:"BatcherStorage"})," interface"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Criteria"}),": Define custom batching logic with user-defined functions"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"-production-ready",children:"\ud83d\udcca Production-Ready"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"RESTful HTTP API with OpenAPI documentation"}),"\n",(0,r.jsx)(n.li,{children:"Event system for monitoring and observability"}),"\n",(0,r.jsx)(n.li,{children:"Graceful shutdown with configurable hooks"}),"\n",(0,r.jsx)(n.li,{children:"Structured concurrency using Effection"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 HTTP Client \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502 POST /send-input\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     Batcher Core           \u2502\n\u2502  - Validation                    \u2502\n\u2502  - Storage Persistence           \u2502\n\u2502  - Batching Criteria Check       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n    \u250c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u25bc          \u25bc          \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502EVM     \u2502 \u2502Midnight\u2502 \u2502Custom  \u2502\n\u2502Adapter \u2502 \u2502Adapter \u2502 \u2502Adapter \u2502\n\u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\n    \u2502          \u2502          \u2502\n    \u25bc          \u25bc          \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502Ethereum\u2502 \u2502Midnight\u2502 \u2502Custom  \u2502\n\u2502Chain   \u2502 \u2502Network \u2502 \u2502Chain   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.h2,{id:"documentation-structure",children:"Documentation Structure"}),"\n",(0,r.jsx)(n.h3,{id:"getting-started",children:"Getting Started"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/introduction",children:"Introduction"})})," - What is the Batcher and why use it?"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/core-concepts",children:"Core Concepts"})})," - Key abstractions: ",(0,r.jsx)(n.code,{children:"Batcher"}),", ",(0,r.jsx)(n.code,{children:"BlockchainAdapter"}),", ",(0,r.jsx)(n.code,{children:"Target"}),", ",(0,r.jsx)(n.code,{children:"DefaultBatcherInput"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configuration--setup",children:"Configuration & Setup"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/configuration",children:"Configuration"})})," - Complete setup guide with dynamic and unified configuration approaches"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/batching-pipeline",children:"The Batching Pipeline"})})," - Understanding the input lifecycle from submission to confirmation"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"customization",children:"Customization"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/adapter",children:"Custom Adapters"})})," - Implementing ",(0,r.jsx)(n.code,{children:"BlockchainAdapter"})," for new blockchains"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/advanced-topics",children:"Advanced Topics"})})," - HTTP API, batching criteria, event system, storage backends, and Effection integration"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,r.jsx)(n.h3,{id:"multi-chain-gaming",children:"Multi-Chain Gaming"}),"\n",(0,r.jsx)(n.p,{children:"Batch player actions across multiple chains with different batching rules per chain."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'batcher\n  .addBlockchainAdapter("ethereum", ethAdapter, {\n    criteriaType: "hybrid",\n    timeWindowMs: 5000,    // 5 seconds max wait\n    maxBatchSize: 50        // or 50 moves\n  })\n  .addBlockchainAdapter("polygon", polygonAdapter, {\n    criteriaType: "time",\n    timeWindowMs: 1000      // Submit every second (cheaper gas)\n  });\n'})}),"\n",(0,r.jsx)(n.h3,{id:"financial-applications",children:"Financial Applications"}),"\n",(0,r.jsx)(n.p,{children:"Batch payments when accumulated value reaches a threshold."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'batcher.addBlockchainAdapter("payments", paymentsAdapter, {\n  criteriaType: "value",\n  valueAccumulatorFn: (input) => input.amount,\n  targetValue: 100000  // Batch when $1000 accumulated\n});\n'})}),"\n",(0,r.jsx)(n.h3,{id:"nft-minting",children:"NFT Minting"}),"\n",(0,r.jsx)(n.p,{children:"Process mints in batches based on queue size."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'batcher.addBlockchainAdapter("nft", nftAdapter, {\n  criteriaType: "size",\n  maxBatchSize: 20  // Mint 20 NFTs per batch\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"example-complete-setup",children:"Example: Complete Setup"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'import { main, suspend } from "effection";\nimport { PaimaBatcher, FileStorage, PaimaL2DefaultAdapter } from "@paimaexample/batcher";\n\n// 1. Create adapter\nconst adapter = new PaimaL2DefaultAdapter(\n  "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb",  // Contract address\n  process.env.PRIVATE_KEY!,                       // Private key\n  0n,                                              // Fee\n  "mainEvmRPC"                                     // Sync protocol name\n);\n\n// 2. Create batcher\nconst batcher = new PaimaBatcher({\n  pollingIntervalMs: 1000,\n  port: 3334,\n  enableHttpServer: true,\n  enableEventSystem: true,\n  adapters: {}  // Start empty, add dynamically\n}, new FileStorage("./batcher-data"));\n\n// 3. Wire adapter with criteria\nbatcher.addBlockchainAdapter("ethereum", adapter, {\n  criteriaType: "hybrid",\n  timeWindowMs: 5000,\n  maxBatchSize: 50\n}).setDefaultTarget("ethereum");\n\n// 4. Add monitoring\nbatcher.addStateTransition("startup", ({ publicConfig }) => {\n  console.log(`\ud83d\ude80 Batcher started on port ${publicConfig.port}`);\n});\n\nbatcher.addStateTransition("batch:submit", ({ txHash }) => {\n  console.log(`\ud83d\ude80 Batch submitted: ${txHash}`);\n});\n\n// 5. Run with Effection\nmain(function* () {\n  yield* batcher.runBatcher();\n  yield* suspend();\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"api-endpoints",children:"API Endpoints"}),"\n",(0,r.jsx)(n.p,{children:"Once running, the batcher exposes these HTTP endpoints:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /send-input"})," - Submit a new input"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GET /status"})," - Batcher status and configuration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GET /queue-stats"})," - Queue statistics per target"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GET /health"})," - Health check"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /force-batch"})," - Manually trigger batching (dev)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GET /documentation"})," - Interactive OpenAPI docs"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/advanced-topics#http-api",children:"HTTP API"})," for complete documentation."]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.p,{children:"Choose your path:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"I'm new to the batcher:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Read ",(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/introduction",children:"Introduction"})]}),"\n",(0,r.jsxs)(n.li,{children:["Understand ",(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/core-concepts",children:"Core Concepts"})]}),"\n",(0,r.jsxs)(n.li,{children:["Follow ",(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/configuration",children:"Configuration Guide"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"I want to customize:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Learn ",(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/batching-pipeline",children:"The Batching Pipeline"})]}),"\n",(0,r.jsxs)(n.li,{children:["Implement ",(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/adapter",children:"Custom Adapters"})]}),"\n",(0,r.jsxs)(n.li,{children:["Explore ",(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/advanced-topics",children:"Advanced Topics"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"I'm ready to deploy:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Review ",(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/configuration",children:"Configuration"})]}),"\n",(0,r.jsxs)(n.li,{children:["Set up ",(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/advanced-topics#event-system",children:"Event System"})," for monitoring"]}),"\n",(0,r.jsxs)(n.li,{children:["Configure ",(0,r.jsx)(n.a,{href:"/docs/ja/home/components/batcher/advanced-topics#storage-system",children:"Storage"})," for production"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);