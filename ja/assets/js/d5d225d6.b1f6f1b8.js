"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[9193],{4331:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"home/chains/avail","title":"Avail","description":"Avail is a Data Availability (DA) layer. In Effectstream, it is often used to store the raw input data of the application cheaply and securely.","source":"@site/docs/home/200-chains/204-avail.md","sourceDirName":"home/200-chains","slug":"/home/chains/avail","permalink":"/docs/ja/home/chains/avail","draft":false,"unlisted":false,"editUrl":"https://github.com/PaimaStudios/paima-engine-docs/tree/main/docs/home/200-chains/204-avail.md","tags":[],"version":"current","sidebarPosition":204,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Cardano","permalink":"/docs/ja/home/chains/cardano"},"next":{"title":"Bitcoin","permalink":"/docs/ja/home/chains/bitcoin"}}');var a=t(2531),l=t(6613);const o={},r="Avail",s={},c=[{value:"1. Configuration (Read)",id:"1-configuration-read",level:2},{value:"Network Definition",id:"network-definition",level:3},{value:"Sync Protocol",id:"sync-protocol",level:3},{value:"Primitives",id:"primitives",level:3},{value:"2. Batcher Adapters (Write)",id:"2-batcher-adapters-write",level:2},{value:"3. Orchestration",id:"3-orchestration",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"avail",children:"Avail"})}),"\n",(0,a.jsx)(n.p,{children:"Avail is a Data Availability (DA) layer. In Effectstream, it is often used to store the raw input data of the application cheaply and securely."}),"\n",(0,a.jsx)(n.h2,{id:"1-configuration-read",children:"1. Configuration (Read)"}),"\n",(0,a.jsx)(n.h3,{id:"network-definition",children:"Network Definition"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'.buildNetworks(builder =>\n  builder.addNetwork({\n    name: "avail",\n    type: ConfigNetworkType.AVAIL,\n    nodeUrl: "ws://127.0.0.1:9955/ws",\n    // ... genesis config\n  })\n)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"sync-protocol",children:"Sync Protocol"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"AVAIL_PARALLEL"})," protocol connects to an Avail ",(0,a.jsx)(n.strong,{children:"Light Client"}),". This allows the node to verify data availability without running a full node."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'.addParallel(\n  (networks) => networks.avail,\n  (network, deployments) => ({\n    name: "parallelAvail",\n    type: ConfigSyncProtocolType.AVAIL_PARALLEL,\n    rpc: network.nodeUrl,\n    lightClient: "http://127.0.0.1:7007", // Local light client API\n    startBlockHeight: 1,\n  })\n)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"primitives",children:"Primitives"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"PrimitiveTypeAvailGeneric"})}),": Listens for data blobs submitted to a specific ",(0,a.jsx)(n.code,{children:"AppId"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'import { PrimitiveTypeAvailGeneric } from "@effectstream/sm/builtin";\n\n.addPrimitive(\n  (syncProtocols) => syncProtocols.parallelAvail,\n  (network, deployments, syncProtocol) => ({\n    name: "AvailData",\n    type: PrimitiveTypeAvailGeneric,\n    appId: 123, // Your Avail App ID\n    stateMachinePrefix: "avail-data",\n  })\n)\n'})}),"\n",(0,a.jsx)(n.h2,{id:"2-batcher-adapters-write",children:"2. Batcher Adapters (Write)"}),"\n",(0,a.jsx)(n.p,{children:"To submit data to Avail, use an adapter that interacts with the Avail SDK or Light Client."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Conceptual usage\n// The adapter would use `avail-js-sdk` to submit data blobs.\nconst availAdapter = new AvailAdapter(appId, seed, endpoint);\n"})}),"\n",(0,a.jsx)(n.h2,{id:"3-orchestration",children:"3. Orchestration"}),"\n",(0,a.jsxs)(n.p,{children:["Use ",(0,a.jsx)(n.code,{children:"launchAvail"})," from ",(0,a.jsx)(n.code,{children:"@effectstream/orchestrator/start-avail"}),". This starts:"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"A local Avail Node."}),"\n",(0,a.jsx)(n.li,{children:"An Avail Light Client connected to that node."}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'// in start.ts\nprocessesToLaunch: [\n  ...launchAvail("@my-project/avail-contracts"),\n]\n'})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["NOTE: To use this launcher you need to implement some ",(0,a.jsx)(n.code,{children:"deno task"})," in your project. A working implementation is provided in the ",(0,a.jsx)(n.code,{children:"template generator"}),", ",(0,a.jsx)(n.code,{children:"templates"})," or ",(0,a.jsx)(n.code,{children:"e2e tests"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "name": "@e2e/avail-contracts",\n  ...\n  "tasks": {\n    "avail-node:start": "deno run -A --unstable-detect-cjs @effectstream/npm-avail-node --dev --rpc-port 9955 --no-telemetry",\n    "avail-node:wait": "wait-on tcp:9955",\n    "avail-light-client:deploy": "deno task avail-light-client:clean && deno run -A --unstable-detect-cjs ./deploy.ts",\n    "avail-light-client:start": "deno run -A --unstable-detect-cjs @effectstream/npm-avail-light-client --config ./config.yml --app-id $AVAIL_APP_ID",\n    "avail-light-client:wait": "wait-on tcp:7007",\n    "avail-light-client:clean": "rm -rf ./avail_path"\n  }\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},6613:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var i=t(1491);const a={},l=i.createContext(a);function o(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);